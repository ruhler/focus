# vim: ft=python

Import('env')

# sconscript configuration stuff.
# Figure out which requirements are met.

requirements = ["sdl", "libpng", "poppler-cpp", "freetype2", "fontconfig"]
satisfied = []

# Use pkg-config to extend LIBS, LIBPATH, and CPPPATH lists
print "Using pkg-config to find info about required packages..."
for req in requirements:
    try:
        env.ParseConfig("pkg-config --silence-errors --cflags --libs %s" % req)
    except OSError:
        pass


conf = Configure(env, conf_dir='.', log_file='config.log')
if not conf.CheckLibWithHeader('SDL', 'SDL/SDL.h', 'c'):
    satisfied.append("sdl")

if not conf.CheckLibWithHeader('libpng', 'png.h', 'c'):
    satisfied.append("libpng")

if not conf.CheckLibWithHeader('poppler-cpp', 'poppler-document.h', 'c++'):
    satisfied.append("poppler-cpp")

if not conf.CheckLibWithHeader('freetype', 'ft2build.h', 'c'):
    satisfied.append("freetype2")

if not conf.CheckLibWithHeader('fontconfig', 'fontconfig/fontconfig.h', 'c'):
    satisfied.append("fontconfig")

