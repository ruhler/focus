
Import("env")


focusdoc_text = env.Command('focus.txt', ['docl.tcl', 'focus.docl'],
    "tclsh8.5 ${SOURCES[0]} text ${SOURCES[1]} > $TARGET")
Default(focusdoc_text)

focusdoc_html = env.Command('focus.html', ['docl.tcl', 'focus.docl'],
    "tclsh8.5 ${SOURCES[0]} html ${SOURCES[1]} > $TARGET")
Default(focusdoc_html)

focusdoc_tex = env.Command('focus.tex', ['docl.tcl', 'focus.docl'],
    "tclsh8.5 ${SOURCES[0]} tex ${SOURCES[1]} > $TARGET")
Default(focusdoc_tex)

env.Depends([focusdoc_text, focusdoc_html, focusdoc_tex], [
    "consoler/consoler.docl",
    "fonter/fonter.docl",
    "boxer/boxer.docl",
    "filler/filler.docl",
    "green/green.docl",
    "pdfer/pdfer.docl",
    "pnger/pnger.docl",
    "sdlcsr/sdlcsr.docl",
    "termer/termer.docl"
    ])

programs = ['boxer', 'filler', 'pdfer', 'pnger', 'sdlcsr', 'termer']
for prog in programs:
    man = env.Command("%s.1" % prog, ["docl.tcl", "%s/%s.docl" % (prog, prog)],
            "tclsh8.5 ${SOURCES[0]} man ${SOURCES[1]} > $TARGET")
    Default(man)
    env.Install("$PREFIX/share/man/man1", man)

# green is special because it has two programs
sgreenman = env.Command("sgreen.1", ["docl.tcl", "green/green.docl"],
        "tclsh8.5 ${SOURCES[0]} man ${SOURCES[1]} > $TARGET")
Default(sgreenman)
env.Install("$PREFIX/share/man/man1", sgreenman)

cgreenman = env.Command("cgreen.1", ["docl.tcl", "green/green.docl"],
        "tclsh8.5 ${SOURCES[0]} man ${SOURCES[1]} > $TARGET")
Default(cgreenman)
env.Install("$PREFIX/share/man/man1", cgreenman)

consolermans = [
        'consoler/CNSL_Version.3',
        'consoler/CNSL_MakeKeyrelease.3',
        'consoler/CNSL_MakeKeyrelease.3',
        'consoler/CNSL_MakeQuit.3',
        'consoler/CNSL_IsKeypress.3',
        'consoler/CNSL_IsKeyrelease.3',
        'consoler/CNSL_IsQuit.3',
        'consoler/CNSL_GetRed8.3',
        'consoler/CNSL_GetGreen8.3',
        'consoler/CNSL_GetBlue8.3',
        'consoler/CNSL_GetRGB8.3',
        'consoler/CNSL_MakeColor.3',
        'consoler/CNSL_AllocDisplay.3',
        'consoler/CNSL_FreeDisplay.3',
        'consoler/CNSL_GetPixel.3',
        'consoler/CNSL_SetPixel.3',
        'consoler/CNSL_LaunchClient.3',
        'consoler/CNSL_CloseClient.3',
        'consoler/CNSL_RecvEvent.3',
        'consoler/CNSL_SendEvent.3',
        'consoler/CNSL_SendDisplay.3',
        'consoler/CNSL_RecvDisplay.3',
        'consoler/CNSL_SetGeometry.3',
        'consoler/CNSL_GetGeometry.3'
        ]
env.Command(consolermans, ["docl.tcl", "consoler/consoler.docl"],
        "tclsh8.5 ${SOURCES[0]} libman ${SOURCES[1]}")
Default(consolermans)
env.Install("$PREFIX/share/man/man3", consolermans)

